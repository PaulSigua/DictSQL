<div class="min-h-full flex flex-col">
  <div *ngIf="hasTabs$ | async" class="sticky top-0 z-10 bg-custom-surface border-b border-[var(--color-border)]">
    <div class="px-3 pt-2">
      <div class="w-full overflow-x-auto custom-scroll">
        <div class="inline-flex gap-2 whitespace-nowrap">
          <div
            *ngFor="let tab of tabs$ | async; trackBy: trackTab"
            (click)="activate(tab.id)"
            class="shrink-0 px-4 py-2 cursor-pointer inline-flex items-center gap-2
                   select-none rounded-t-lg border text-custom
                   border-[var(--tab-border)] transition-colors"
            [ngClass]="tab.active
              ? 'border-[var(--tab-border-active)] bg-custom-surface'
              : 'bg-custom-background hover:bg-[var(--color-background-label)]'"
          >
            <div class="flex items-center gap-1.5">
              <lucide-icon name="Database" class="w-4 h-4 text-blue-600"></lucide-icon>
              <span class="font-semibold truncate max-w-[12rem]">{{ tab.title }}</span>
            </div>
            <button
              class="ml-1 px-2 leading-none rounded hover:bg-[var(--color-background-label)]"
              (click)="close(tab.id); $event.stopPropagation()"
              aria-label="Cerrar"
            >
              <lucide-icon name="X" class="w-3" />
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="hasTabs$ | async; else emptyState" class="flex-1 min-h-0 overflow-auto">
    <div class="rounded-b-lg border border-t-0 border-[var(--color-border)] bg-custom-surface shadow-sm text-custom">

      <ng-container *ngIf="activeTab$ | async as activeTab">

        <div class="flex flex-wrap bg-custom-background p-1 rounded-t-lg w-fit mt-3 ml-3">
          <a routerLink="documentation"
            routerLinkActive="bg-custom-surface border-custom shadow-sm"
            class="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg">
            <lucide-icon name="FileText" class="w-4 h-4"></lucide-icon>
            <span>Documentation</span>
          </a>

          <a routerLink="object-details"
            routerLinkActive="bg-custom-surface border-custom shadow-sm"
            class="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg">
            <lucide-icon name="Info" class="w-4 h-4"></lucide-icon>
            <span>Object Details</span>
          </a>
        </div>
      </ng-container>

      <div class="p-4 h-full overflow-auto">
        <router-outlet></router-outlet>
      </div>
    </div>
  </div>

  <<ng-template #emptyState>
  <div class="flex-1 min-h-0 overflow-auto flex items-center justify-center p-8 bg-custom-surface custom-scroll">
    <div
      class="mx-auto max-w-md text-center bg-custom-background border border-custom rounded-2xl p-10 shadow-sm"
    >
      <!-- Ícono -->
      <div
        class="mx-auto flex items-center justify-center w-20 h-20 rounded-full bg-secondary border border-custom mb-5"
      >
        <lucide-icon name="PlugZap" class="w-10 h-10 text-icon-color opacity-90"></lucide-icon>
      </div>

      <!-- Título -->
      <h3 class="text-custom font-semibold text-lg mb-2">
        {{ 'DASHBOARD.NO_CONNECTIONS_TITLE' | translate : { default: 'No connections yet' } }}
      </h3>

      <!-- Descripción -->
      <p class="text-muted mb-6 leading-relaxed">
        {{ 'DASHBOARD.NO_CONNECTIONS_DESC' | translate : { default: 'Create your first connection to start documenting.' } }}
      </p>

      <!-- Botón -->
      <button
        class="inline-flex items-center justify-center gap-2 px-5 py-2.5 bg-primary text-white font-medium rounded-xl shadow-sm hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary-hover/40 transition-all"
        (click)="openSidenavNewConnection()"
      >
        <lucide-icon name="Plus" class="w-4 h-4"></lucide-icon>
        {{ 'DASHBOARD.CREATE_FIRST' | translate : { default: 'Create a connection' } }}
      </button>
    </div>
  </div>
</ng-template>

</div>
